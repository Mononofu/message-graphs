{% extends "index.html" %}

{% block content %}

<div id='chart'>
  <svg style='height:1000px'> </svg>
</div>

<script>

 nv.addGraph(function() {
    var chart = nv.models.multiBarChart();

    chart.xAxis
        .axisLabel('Month')
        .tickFormat(d3.format(''));

    chart.yAxis
        .axisLabel('# Word')
       .tickFormat(d3.format('.0f'));

   d3.select('#chart svg')
       .datum(words_per_month())
     .transition().duration(500)
       .call(chart);

   nv.utils.windowResize(function() { d3.select('#chart svg').call(chart) });

   return chart;
 });

function words_per_month() {
  return [
{% for name, word_list in words %}
  {
       values: [
        {% for word, count in word_list %}{{ count }}, {% endfor %}
       ],
       key: '{{ name }}'
     },
{% endfor %}
  ];
}


</script>

{% endblock%}

